<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- Include the head section -->
<head th:replace="~{fragments/head :: head(title='Book List')}"></head>
<body>
<h1>List of Books</h1>

<!-- Table displaying the list of books -->
<table id="booksTable">
    <thead>
    <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Published Date</th>
    </tr>
    </thead>
    <tbody>
    <!-- Rows will be dynamically injected here -->
    </tbody>
</table>

<!-- Button to go back -->
<button onclick="goBack()">Go Back</button>

<script>
    const API_URL = 'http://54.255.190.232:8080/api/books'; // Replace with your backend IP

    // Fetch books from the API and display them in the table
    window.onload = function() {
        fetchBooks();
    };

    function fetchBooks() {
        fetch(API_URL)
            .then(response => response.json())
            .then(data => {
                const booksTable = document.getElementById('booksTable').getElementsByTagName('tbody')[0];
                booksTable.innerHTML = ''; // Clear previous data
                data.forEach(book => {
                    const row = booksTable.insertRow();
                    row.insertCell(0).textContent = book.title;
                    row.insertCell(1).textContent = book.author;
                    row.insertCell(2).textContent = book.publishedDate;
                });
            })
            .catch(error => console.error('Error fetching books:', error));
    }

    // Function to go back to the previous page
    function goBack() {
        window.history.back();  // Navigate to the previous page
    }
</script>
</body>
</html>
